<svg xmlns="http://www.w3.org/2000/svg" width="720" height="460" font-family="'JetBrains Mono','Fira Code','Cascadia Code',Menlo,Monaco,'Courier New',monospace" font-size="13">
  <defs>
    <linearGradient id="titlebar" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#3a3a3c"/>
      <stop offset="100%" stop-color="#2c2c2e"/>
    </linearGradient>
  </defs>
  <!-- Window frame -->
  <rect width="720" height="460" rx="10" fill="#1c1c1e"/>
  <!-- Title bar -->
  <rect width="720" height="36" rx="10" fill="url(#titlebar)"/>
  <rect y="26" width="720" height="10" fill="url(#titlebar)"/>
  <!-- Traffic lights -->
  <circle cx="20" cy="18" r="6" fill="#ff5f57"/>
  <circle cx="40" cy="18" r="6" fill="#febc2e"/>
  <circle cx="60" cy="18" r="6" fill="#28c840"/>
  <!-- Title -->
  <text x="360" y="23" fill="#98989d" text-anchor="middle" font-size="12" font-family="'JetBrains Mono','Fira Code',Menlo,monospace">Rust-Style Error Rendering — dx_error()</text>

  <!-- Terminal content -->
  <g transform="translate(20, 52)" font-size="13" xml:space="preserve">
    <!-- Scenario 1: Event bus error -->
    <text y="0" fill="#636366"># Event bus detects missing store directory</text>

    <text y="28" fill="#ff453a">LOA-E301</text>
    <text x="72" y="28" fill="#e5e5ea">: event_bus_unavailable</text>

    <text y="56" fill="#e5e5ea">  The event bus store directory does not exist or is not writable.</text>
    <text y="76" fill="#636366">  ─→</text>
    <text x="32" y="76" fill="#e5e5ea"> /home/user/project/grimoires/loa/a2a/events/</text>

    <text y="104" fill="#ffffff" font-weight="bold">  Fix:</text>
    <text x="48" y="104" fill="#e5e5ea"> Check that the event store directory exists and is writable.</text>
    <text x="48" y="120" fill="#e5e5ea"> Run /loa doctor for details.</text>

    <!-- Divider -->
    <text y="156" fill="#48484a">  ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─</text>

    <!-- Scenario 2: Security guardrail -->
    <text y="184" fill="#636366"># Input guardrail detects PII in prompt</text>

    <text y="212" fill="#ff453a">LOA-E402</text>
    <text x="72" y="212" fill="#e5e5ea">: pii_detected</text>

    <text y="240" fill="#e5e5ea">  Personally identifiable information detected in input.</text>
    <text y="256" fill="#e5e5ea">  Types: API keys, email addresses, SSN, credit card numbers.</text>
    <text y="276" fill="#636366">  ─→</text>
    <text x="32" y="276" fill="#e5e5ea"> Input contained pattern matching: api_key</text>

    <text y="304" fill="#ffffff" font-weight="bold">  Fix:</text>
    <text x="48" y="304" fill="#e5e5ea"> Remove PII before passing to Loa. Use environment variables</text>
    <text x="48" y="320" fill="#e5e5ea"> for secrets instead of inline values.</text>

    <!-- Divider -->
    <text y="356" fill="#48484a">  ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─</text>

    <!-- Design note -->
    <text y="384" fill="#636366"># Every error: what went wrong + where + how to fix</text>
    <text y="404" fill="#636366"># dx_error() NEVER exits — the caller decides severity</text>
  </g>
</svg>