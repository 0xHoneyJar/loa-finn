# deploy/production.env.example — Production environment configuration (SDD §4.1, cycle-024 T8)
#
# Copy to .env for local development, or set via ECS task definition secrets/environment.
# All SECRET values must be set via AWS Secrets Manager in production (never plain env vars).
# See deploy/terraform/finn-secrets.tf for the Secrets Manager resources.

# --- Core ---
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# --- Data Persistence ---
# EFS mount point in production (see finn.tf EFS volume config)
DATA_DIR=/data

# --- Model Routing (Hounfour) ---
# HMAC secret shared between finn and cheval sidecar
# CHEVAL_HMAC_SECRET=<set-via-secrets-manager>

# --- Provider API Keys ---
# Set via AWS Secrets Manager → ECS task definition secrets
# ANTHROPIC_API_KEY=<set-via-secrets-manager>

# --- Authentication ---
# Bearer token for direct API access (non-JWT path)
# FINN_AUTH_TOKEN=<set-via-secrets-manager>

# --- S2S Billing (arrakis integration) ---
# Algorithm for S2S JWT signing. Must be ES256 or HS256.
FINN_S2S_JWT_ALG=ES256
# ES256 private key (PEM format) — set via Secrets Manager
# FINN_S2S_PRIVATE_KEY=<set-via-secrets-manager>
# Key ID for JWKS endpoint
FINN_S2S_KID=loa-finn-v1
# Arrakis billing finalize URL
# ARRAKIS_BILLING_URL=https://arrakis.community
# Arrakis base URL (for protocol handshake)
# ARRAKIS_BASE_URL=https://arrakis.community

# --- Redis (ElastiCache) ---
# Full rediss:// URL with TLS + auth token
# REDIS_URL=<set-via-secrets-manager>

# --- OTLP Tracing (SDD §7, cycle-024 T4) ---
# gRPC endpoint for OpenTelemetry traces (Tempo via Cloud Map)
OTLP_ENDPOINT=http://tempo.arrakis.local:4317

# --- Dashboard (optional) ---
# GitHub token for Bridgebuilder activity feed
# GITHUB_TOKEN=<optional>
# BRIDGEBUILDER_REPOS=0xHoneyJar/loa-finn
# BRIDGEBUILDER_BOT_USER=bridgebuilder-bot

# --- Worker Pool ---
# SANDBOX_MODE=disabled
# (Sidecar mode for production multi-model routing)
# CHEVAL_MODE=sidecar
# CHEVAL_PORT=3001
